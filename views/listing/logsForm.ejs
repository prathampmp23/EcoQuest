<% layout("layouts/boilerplate") %>

<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card shadow-lg p-4">
          <h2 class="text-center mb-4">Log Plastic Waste Collection</h2>

          <form
            action="/EcoQuest/wasteLog"
            method="POST"
            class="needs-validation"
            novalidate
            enctype="multipart/form-data"
          >
            <!-- Description -->
            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea
                id="description"
                name="description"
                class="form-control"
                placeholder="Briefly describe the waste collected"
                rows="3"
                required
              ></textarea>
              <div class="invalid-feedback">Please provide a description.</div>
            </div>

            <!-- Weight Input -->
            <div class="mb-3">
              <label for="weight" class="form-label">Weight (kg)</label>
              <input
                type="number"
                step="0.1"
                id="weight"
                name="weight"
                class="form-control"
                placeholder="Enter weight of collected plastic"
                required
              />
              <div class="invalid-feedback">Please enter the weight in kg.</div>
            </div>

            <!-- Image Upload -->
            <div class="mb-3">
              <input
                type="file"
                id="image"
                name="image"
                class="form-control"
                accept="image/*"
                required
              />
              <div class="invalid-feedback">Please upload an image.</div>
            </div>

            <!-- Recycling Center (Optional) -->
            <div class="mb-3">
              <label for="recyclingCenter" class="form-label"
                >Recycling Center (Optional)</label
              >
              <input
                type="text"
                id="recyclingCenter"
                name="recyclingCenter"
                class="form-control"
                placeholder="Enter recycling center name (if known)"
              />
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-success w-100">
              Submit Log
            </button>
          </form>

          <!-- Back to Dashboard -->
          <p class="text-center mt-3">
            <a href="/EcoQuest">Back to home page</a>
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Bootstrap Form Validation
    (function () {
      "use strict";
      const forms = document.querySelectorAll(".needs-validation");
      Array.from(forms).forEach((form) => {
        form.addEventListener(
          "submit",
          (event) => {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add("was-validated");
          },
          false
        );
      });
    })();
  </script>
</body>
